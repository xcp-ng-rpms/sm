From 8a683f270d5cf30ad5ad1f2f163207681bdc5e83 Mon Sep 17 00:00:00 2001
From: Ronan Abhamon <ronan.abhamon@vates.fr>
Date: Thu, 15 Dec 2022 14:36:04 +0100
Subject: [PATCH 098/170] feat(fork-log-daemon): ignore SIGTERM

Without this patch, the output logs of the fork-log-daemon child
are never displayed when SIGTERM is sent to the PGID.

Signed-off-by: Ronan Abhamon <ronan.abhamon@vates.fr>
---
 scripts/fork-log-daemon | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/scripts/fork-log-daemon b/scripts/fork-log-daemon
index eb0f0b0..665a60b 100755
--- a/scripts/fork-log-daemon
+++ b/scripts/fork-log-daemon
@@ -1,12 +1,14 @@
 #!/usr/bin/env python
 
 import select
+import signal
 import subprocess
 import sys
 import syslog
 
 def main():
     process = subprocess.Popen(sys.argv[1:], stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
+    signal.signal(signal.SIGTERM, signal.SIG_IGN)
     write_to_stdout = True
 
     while process.poll() is None:
-- 
2.44.0

